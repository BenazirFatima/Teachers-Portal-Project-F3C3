<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NWCMC Voting Awareness Simulation</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom Animations */
        @keyframes scrollPaper {
            0% { transform: translateY(100%); opacity: 0; }
            12% { transform: translateY(0); opacity: 1; }
            88% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100%); opacity: 0; }
        }
        .animate-scroll {
            animation: scrollPaper 4s linear forwards;
        }
        @keyframes scaleIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .scale-in {
            animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
        }
        /* Sticky VVPAT container */
        .vvpat-sticky {
            position: sticky;
            top: 0;
            z-index: 100;
        }
        /* Hidden classes */
        .hidden-element {
            display: none !important;
        }
        /* EVM Units background textures */
        .ballot-paper {
            background-image: repeating-linear-gradient(0deg, #f8fafc, #f8fafc 1px, transparent 1px, transparent 40px);
        }
    </style>
</head>
<body class="bg-slate-200 font-sans text-slate-900 flex flex-col min-h-screen overflow-x-hidden">

    <!-- Main Header -->
    <header id="mainHeader" class="bg-[#1e3a8a] text-white p-4 shadow-xl border-b-4 border-orange-600 relative z-40">
        <div class="max-w-6xl mx-auto flex flex-col lg:flex-row justify-between items-center gap-4">
            <div class="text-center lg:text-left">
                <h1 class="text-lg md:text-2xl font-black uppercase tracking-tighter leading-none mb-1">Nanded Waghala Municipal Corporation</h1>
                <p class="text-orange-400 font-bold text-[10px] md:text-xs tracking-[0.2em] uppercase italic">EVM Awareness Simulation ‡•®‡•¶‡•®‡•´-‡•®‡•¨</p>
            </div>
            <div class="flex bg-black/20 p-1 rounded-xl backdrop-blur-md border border-white/10 w-full lg:w-auto">
                <button onclick="switchWard(false)" id="btnWardRegular" class="flex-1 lg:flex-none px-4 py-2 rounded-lg text-[10px] md:text-xs font-black transition-all bg-orange-600 text-white shadow-lg">
                    WARD 1-19 (4 VOTES)
                </button>
                <button onclick="switchWard(true)" id="btnWard20" class="flex-1 lg:flex-none px-4 py-2 rounded-lg text-[10px] md:text-xs font-black transition-all text-slate-300 hover:text-white">
                    WARD 20 (5 VOTES)
                </button>
            </div>
        </div>
    </header>

    <!-- Schedule Banner -->
    <section id="scheduleBanner" class="bg-orange-600 text-white py-2 px-4 shadow-md z-30">
        <div class="max-w-6xl mx-auto flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-8 text-center">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-calendar-days text-orange-200"></i>
                <div class="flex flex-col items-center sm:items-start leading-none">
                    <span class="text-[10px] font-black uppercase tracking-tight">Thursday, 15 Jan 2026</span>
                    <span class="text-[9px] font-bold opacity-80">‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞, ‡•ß‡•´ ‡§ú‡§æ‡§®‡•á ‡•®‡•¶‡•®‡•¨</span>
                </div>
            </div>
            <div class="hidden sm:block w-px h-5 bg-white/20"></div>
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-clock text-orange-200"></i>
                <div class="flex flex-col items-center sm:items-start leading-none">
                    <span class="text-[10px] font-black uppercase tracking-tight">07:30 AM - 05:30 PM</span>
                    <span class="text-[9px] font-bold opacity-80">‡•≠:‡•©‡•¶ AM ‡§§‡•á ‡•´:‡•©‡•¶ PM</span>
                </div>
            </div>
        </div>
    </section>

    <!-- ‚ú® FIXED SMART VVPAT -->
    <div class="vvpat-sticky w-full flex justify-center py-2 bg-slate-200/95 backdrop-blur-md border-b-2 border-slate-300 shadow-2xl pointer-events-none">
        <div class="w-full max-w-[280px] md:max-w-sm px-2 pointer-events-auto">
            <div class="bg-slate-400 p-2 md:p-3 rounded-2xl shadow-xl border-b-4 border-slate-500 relative transform scale-95 transition-all">
                <div class="bg-[#0a0a0a] h-20 md:h-28 rounded-lg flex items-center justify-center overflow-hidden border-4 border-slate-600 shadow-inner">
                    <div id="vvpatContainer" class="w-full flex items-center justify-center h-full">
                        <div class="text-slate-600 font-mono text-[8px] text-center animate-pulse tracking-tighter uppercase font-bold leading-tight">
                            [ System Ready ]<br>Check Your Slip Here
                        </div>
                    </div>
                </div>
                <div class="mt-1 flex justify-between items-center px-1 text-[6px] font-black text-slate-700 tracking-widest">
                    <div class="flex items-center gap-1"><div class="w-1.5 h-1.5 rounded-full bg-green-500 shadow-[0_0_5px_green]"></div><span>POWER</span></div>
                    <div class="flex items-center gap-1"><span>BUSY</span><div id="vvpatBusyLight" class="w-1.5 h-1.5 rounded-full bg-slate-600 transition-colors"></div></div>
                </div>
            </div>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 mt-6 flex-grow w-full pb-32">
        <div id="evmGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- JavaScript setup machines once here -->
        </div>

        <!-- Disclaimer -->
        <section class="mt-16 bg-white border-2 border-slate-300 rounded-[2rem] p-6 text-slate-800 shadow-xl max-w-4xl mx-auto">
            <div class="flex items-center gap-3 mb-6 text-orange-600 border-b pb-4">
                <i class="fa-solid fa-triangle-exclamation text-2xl"></i>
                <h3 class="font-black uppercase text-base tracking-tight leading-none">Important Public Notice / ‡§∏‡•Ç‡§ö‡§®‡§æ</h3>
            </div>
            <div class="grid md:grid-cols-2 gap-6 text-[11px] md:text-sm font-bold leading-relaxed text-slate-600">
                <div class="p-5 bg-orange-50/50 rounded-2xl border-2 border-orange-100">
                    Yeh website sirf logo ki jaagrukta (awareness) aur unhe voting process samjhane ke liye ek demo ke taur par banayi gayi hai. Iska maqsad logo ko matdaan mein hone wali mushkilaat se bachana hai. Humara kisi bhi political party ya raajneetik dal se koi lena-dena nahi hai.
                </div>
                <div class="p-5 bg-blue-50/50 rounded-2xl border-2 border-blue-100">
                    This website is an independent educational demonstration created solely for public awareness. Its purpose is to help voters understand the multi-vote system to ensure a smooth voting experience. We are not affiliated with any political party or organization.
                </div>
            </div>
        </section>
    </main>

    <!-- Success Modal -->
    <div id="successModal" class="hidden-element fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-[110] p-4">
        <div class="bg-white rounded-[2.5rem] p-6 md:p-8 max-w-xs w-full text-center shadow-2xl border-t-8 border-green-500 scale-in">
            <div class="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner">
                <i class="fa-solid fa-circle-check text-4xl"></i>
            </div>
            <h2 class="text-3xl font-black italic text-slate-900 mb-1 uppercase tracking-tighter leading-none">BEEEEP...!!!</h2>
            <p class="text-[10px] font-black text-slate-500 uppercase mb-4 tracking-widest border-b pb-2 text-center">Voting Successful</p>
            
            <div class="mb-8 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-100 rounded-3xl">
                <p class="text-[10px] font-black text-blue-500 uppercase tracking-widest mb-2 border-b border-blue-100 pb-2 text-center">Loktantra Sandesh</p>
                <p class="text-sm font-black text-blue-900 leading-tight italic text-center">
                    "Aapka vote aapki taqat hai. Loktantra ko mazboot banayein!"
                </p>
            </div>

            <button onclick="resetVoting()" class="w-full bg-[#1e3a8a] text-white py-4 rounded-xl font-black uppercase tracking-[0.2em] hover:bg-blue-900 transition-all flex items-center justify-center gap-3 shadow-2xl active:scale-95 border-b-4 border-blue-950">
                <i class="fa-solid fa-rotate-left"></i> New Simulation
            </button>
        </div>
    </div>

    <!-- Progress Tracker -->
    <div class="fixed bottom-6 left-0 right-0 px-4 pointer-events-none z-[40]">
        <div class="max-w-[280px] md:max-w-sm mx-auto bg-slate-900/95 backdrop-blur-xl shadow-[0_25px_60px_rgba(0,0,0,0.5)] border-2 border-slate-700 p-2 md:p-3 rounded-[2rem] flex items-center justify-between pointer-events-auto text-white ring-2 ring-white/5">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg">
                    <i class="fa-solid fa-check-to-slot text-xl"></i>
                </div>
                <div>
                    <p class="text-[8px] text-blue-400 font-black uppercase leading-none mb-0.5">Status</p>
                    <p id="progressLabel" class="font-black text-[10px] md:text-xs tracking-tight leading-none">0 / 4 Rec.</p>
                </div>
            </div>
            <div id="progressDots" class="flex gap-1.5 px-2"></div>
        </div>
    </div>

    <footer class="text-center py-20 bg-slate-300 border-t-2 border-slate-400 relative">
        <p class="text-slate-900 font-black text-4xl italic tracking-tighter mb-1">7ONLY</p>
        <p class="text-[10px] text-slate-500 font-black uppercase tracking-[0.5em] opacity-80">Public Awareness Initiative</p>
    </footer>

    <script>
        // --- State ---
        let isWard20 = false;
        let votedSeats = { A: null, B: null, C: null, D: null, E: null };
        let busyMachine = null; // Stores ID of machine currently showing slip
        let isComplete = false;

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        const config = {
            A: { name: 'Seat A (‡§Ö)', color: 'bg-white', border: 'border-slate-300', machineBg: 'bg-slate-100', accent: 'border-slate-400' },
            B: { name: 'Seat B (‡§¨)', color: 'bg-pink-100', border: 'border-pink-300', machineBg: 'bg-pink-100/50', accent: 'border-pink-400' },
            C: { name: 'Seat C (‡§ï)', color: 'bg-yellow-100', border: 'border-yellow-300', machineBg: 'bg-yellow-100/50', accent: 'border-yellow-400' },
            D: { name: 'Seat D (‡§°)', color: 'bg-blue-100', border: 'border-blue-300', machineBg: 'bg-blue-100/50', accent: 'border-blue-400' },
            E: { name: 'Seat E (‡§á)', color: 'bg-green-100', border: 'border-green-300', machineBg: 'bg-green-100/50', accent: 'border-green-400' }
        };

        const symbols = ["‚òï", "üç≥", "üõ∫", "üö≤", "‚ùå"];

        window.onload = () => {
            initSimulation();
        };

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            if (type === 'click') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(1200, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
                osc.start(); osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'beep') {
                osc.type = 'square'; osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                osc.start(); osc.stop(audioCtx.currentTime + 1.5);
            }
        }

        function switchWard(mode) {
            if (busyMachine) return;
            isWard20 = mode;
            document.getElementById('btnWardRegular').className = !isWard20 ? 'flex-1 lg:flex-none px-4 py-2 rounded-lg text-[10px] md:text-xs font-black bg-orange-600 text-white shadow-lg' : 'flex-1 lg:flex-none px-4 py-2 rounded-lg text-[10px] md:text-xs font-black text-slate-300 hover:text-white';
            document.getElementById('btnWard20').className = isWard20 ? 'flex-1 lg:flex-none px-4 py-2 rounded-lg text-[10px] md:text-xs font-black bg-orange-600 text-white shadow-lg' : 'flex-1 lg:flex-none px-4 py-2 rounded-lg text-[10px] md:text-xs font-black text-slate-300 hover:text-white';
            const grid = document.getElementById('evmGrid');
            grid.className = isWard20 ? 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6' : 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6';
            resetVoting();
        }

        // --- Core Optimization: Initial Build ---
        function initSimulation() {
            const grid = document.getElementById('evmGrid');
            grid.innerHTML = '';
            const activeSeats = isWard20 ? ['A', 'B', 'C', 'D', 'E'] : ['A', 'B', 'C', 'D'];

            activeSeats.forEach((id) => {
                const s = config[id];
                const card = document.createElement('div');
                card.id = `machine-${id}`;
                card.className = `machine-unit relative flex flex-col rounded-3xl p-3 shadow-2xl border-x-4 border-b-8 transition-all duration-300 ${s.machineBg} ${s.accent.replace('border-', 'border-b-')}`;
                
                let rows = '';
                for (let i = 0; i < 5; i++) {
                    const isNota = i === 4;
                    rows += `
                        <div id="row-${id}-${i}" class="flex items-center gap-2 h-12 border-b-2 border-slate-50 last:border-0 px-1">
                            <div class="flex-1 flex items-center gap-1 overflow-hidden">
                                <span class="text-[9px] font-black w-3 text-slate-400">${i + 1}</span>
                                <div class="flex flex-col truncate leading-none">
                                    <span class="text-[9px] font-black uppercase text-slate-800">${isNota ? 'NOTA' : 'Candidate ' + (i + 1)}</span>
                                    <span class="text-[8px] font-bold text-slate-400 mt-0.5">${isNota ? '‡§®‡•ã‡§ü‡§æ' : '‡§â‡§Æ‡•á‡§¶‡§µ‡§æ‡§∞ ' + (i + 1)}</span>
                                </div>
                                <span class="text-xl ml-auto">${symbols[i]}</span>
                            </div>
                            <div class="bg-slate-100 p-1 rounded-lg flex items-center gap-1.5 border border-slate-200 shadow-sm">
                                <div id="led-${id}-${i}" class="w-3.5 h-3.5 rounded-full border border-black/10 bg-slate-300"></div>
                                <button id="btn-${id}-${i}" onclick="handleVote('${id}', ${i})" class="evm-btn w-10 h-8 rounded shadow-md active:translate-y-1 transition-all bg-[#1e40af] hover:bg-blue-700 flex items-center justify-center">
                                    <div class="w-4 h-4 rounded-full border border-white/20"></div>
                                </button>
                            </div>
                        </div>`;
                }

                card.innerHTML = `
                    <div class="flex justify-between items-center px-2 py-1 bg-black/5 rounded-lg mb-3">
                        <div class="flex items-center gap-1"><div id="ready-${id}" class="w-2.5 h-2.5 rounded-full bg-green-500 shadow-[0_0_5px_green]"></div><span class="text-[7px] font-black text-slate-600 uppercase">Ready</span></div>
                        <div class="flex items-center gap-1"><span class="text-[7px] font-black text-slate-600 uppercase">Busy</span><div id="busy-${id}" class="w-2.5 h-2.5 rounded-full bg-slate-500"></div></div>
                    </div>
                    <div class="bg-white rounded-xl border-2 ${s.border} p-1 shadow-inner flex-grow ballot-paper">
                        <div class="${s.color} py-1.5 px-2 mb-3 text-center text-xs font-black rounded border-2 ${s.border} shadow-md uppercase tracking-tight">${s.name}</div>
                        <div class="space-y-1">${rows}</div>
                    </div>`;
                grid.appendChild(card);
            });
            updateUIState();
        }

        // --- Core Optimization: Update UI without rebuilding DOM ---
        function updateUIState() {
            const activeSeats = isWard20 ? ['A', 'B', 'C', 'D', 'E'] : ['A', 'B', 'C', 'D'];
            const votedCount = activeSeats.filter(s => votedSeats[s] !== null).length;

            activeSeats.forEach((id, idx) => {
                const hasVoted = votedSeats[id] !== null;
                const isNext = !hasVoted && busyMachine === null && idx === votedCount;
                const machineEl = document.getElementById(`machine-${id}`);
                
                // Highlight Next
                if (isNext) machineEl.classList.add('ring-8', 'ring-blue-500/20', 'scale-[1.02]');
                else machineEl.classList.remove('ring-8', 'ring-blue-500/20', 'scale-[1.02]');

                // Status Lights
                document.getElementById(`ready-${id}`).className = `w-2.5 h-2.5 rounded-full ${hasVoted ? 'bg-slate-600' : 'bg-green-500 shadow-[0_0_5px_green]'}`;
                document.getElementById(`busy-${id}`).className = `w-2.5 h-2.5 rounded-full ${busyMachine === id ? 'bg-red-600 shadow-[0_0_5px_red]' : 'bg-slate-500'}`;

                // Row & Button States
                for (let i = 0; i < 5; i++) {
                    const isSelected = votedSeats[id] === i;
                    const row = document.getElementById(`row-${id}-${i}`);
                    const led = document.getElementById(`led-${id}-${i}`);
                    const btn = document.getElementById(`btn-${id}-${i}`);

                    row.className = `flex items-center gap-2 h-12 border-b-2 border-slate-50 last:border-0 px-1 ${isSelected ? 'bg-red-50' : ''}`;
                    led.className = `w-3.5 h-3.5 rounded-full border border-black/10 transition-colors ${isSelected ? 'bg-red-600 shadow-[0_0_5px_red]' : 'bg-slate-300'}`;
                    
                    // Logic: Disable if machine voted, or someone else is busy, or simulation complete
                    btn.disabled = hasVoted || busyMachine !== null || isComplete;
                    btn.className = `evm-btn w-10 h-8 rounded shadow-md active:translate-y-1 transition-all flex items-center justify-center ${isSelected ? 'bg-[#000080]' : 'bg-[#1e40af] hover:bg-blue-700'} disabled:opacity-40`;
                }
            });

            // Update Progress Widget
            document.getElementById('progressLabel').innerText = `${votedCount} / ${activeSeats.length} Rec.`;
            const dots = document.getElementById('progressDots');
            dots.innerHTML = '';
            activeSeats.forEach(s => {
                const dot = document.createElement('div');
                dot.className = `w-3 h-3 rounded-full transition-all duration-700 shadow-inner ${votedSeats[s] !== null ? 'bg-green-500 shadow-[0_0_10px_#22c55e] scale-125' : 'bg-slate-700 border border-slate-600'}`;
                dots.appendChild(dot);
            });
        }

        function handleVote(seatId, index) {
            if (busyMachine || isComplete || votedSeats[seatId] !== null) return;

            busyMachine = seatId;
            votedSeats[seatId] = index;

            // VVPAT
            const vvpat = document.getElementById('vvpatContainer');
            const light = document.getElementById('vvpatBusyLight');
            light.className = 'w-1.5 h-1.5 rounded-full bg-red-500 shadow-[0_0_8px_red]';
            vvpat.innerHTML = `
                <div class="bg-white w-24 md:w-32 h-16 md:h-24 p-2 shadow-md flex flex-col items-center justify-center animate-scroll border-x border-slate-100 text-center">
                    <p class="text-[5px] font-bold text-slate-300 mb-1 border-b w-full uppercase tracking-widest leading-none pb-0.5">VVPAT CONFIRMATION</p>
                    <span class="text-xl md:text-3xl mb-1">${symbols[index]}</span>
                    <p class="text-[8px] md:text-[10px] font-black text-black uppercase">${index === 4 ? 'NOTA' : 'Candidate ' + (index + 1)}</p>
                    <p class="text-[7px] mt-1 bg-slate-200 px-2 font-bold rounded italic">SEAT ${seatId}</p>
                </div>`;

            const total = isWard20 ? 5 : 4;
            const current = Object.keys(votedSeats).filter(k => (isWard20 || k !== 'E') && votedSeats[k] !== null).length;

            if (current === total) {
                playSound('beep');
                setTimeout(() => { isComplete = true; document.getElementById('successModal').classList.remove('hidden-element'); }, 3500);
            } else {
                playSound('click');
            }

            updateUIState();

            setTimeout(() => {
                busyMachine = null;
                light.className = 'w-1.5 h-1.5 rounded-full bg-slate-600';
                if (!isComplete) vvpat.innerHTML = `<div class="text-slate-600 font-mono text-[8px] text-center animate-pulse uppercase font-bold leading-tight">[ System Ready ]<br>Check Your Slip Here</div>`;
                updateUIState();
            }, 4000);
        }

        function resetVoting() {
            votedSeats = { A: null, B: null, C: null, D: null, E: null };
            busyMachine = null; isComplete = false;
            document.getElementById('successModal').classList.add('hidden-element');
            document.getElementById('vvpatContainer').innerHTML = `<div class="text-slate-600 font-mono text-[8px] text-center animate-pulse uppercase font-bold leading-tight">[ System Ready ]<br>Check Your Slip Here</div>`;
            document.getElementById('vvpatBusyLight').className = 'w-1.5 h-1.5 rounded-full bg-slate-600';
            initSimulation();
        }
    </script>
</body>
</html>


